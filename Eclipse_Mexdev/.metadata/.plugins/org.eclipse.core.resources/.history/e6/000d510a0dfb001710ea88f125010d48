#include <stdio.h>
#include <stdlib.h>
#include "mex.h"

void print_real_matrix(double *matrix, mwSize M, mwSize N);
void print_complex_matrix(double *real_matrix,
                          double *imaginary_matrix,
                          mwSize M, mwSize N);

void mexFunction( int nlhs, mxArray *plhs[],
                  int nrhs, const mxArray *prhs[] )
{

    double *binary_word_stream;
    double *binary_alphabet;
//    double *complex_alphabet_real, *complex_alphabet_imaginary;

    mwSize binary_word_stream_M, binary_word_stream_N;
    mwSize binary_alphabet_M, binary_alphabet_N;
//    mwSize complex_alphabet_M, complex_alphabet_N;

    binary_word_stream_M = mxGetM(prhs[0]);
    binary_word_stream_N = mxGetN(prhs[0]);
    binary_alphabet_M = mxGetM(prhs[1]);
    binary_alphabet_N = mxGetN(prhs[1]);
//    complex_alphabet_M = mxGetM(prhs[2]);
//    complex_alphabet_N = mxGetN(prhs[2]);

    binary_word_stream = mxGetPr(prhs[0]);
    binary_alphabet = mxGetPr(prhs[1]);
/*    complex_alphabet_real = mxGetPr(prhs[2]);
    complex_alphabet_imaginary = mxGetPi(prhs[2]);*/

    print_real_matrix(binary_word_stream,
                      binary_word_stream_M,
                      binary_word_stream_N);
    print_real_matrix(binary_alphabet,
                      binary_alphabet_M,
                      binary_alphabet_N);
/*    print_complex_matrix(print_complex_matrix,
                         complex_alphabet_imaginary,
                         complex_alphabet_M,
                         complex_alphabet_N);*/
    /* create output matrix C
    plhs[0] = mxCreateDoubleMatrix(m, n, mxREAL);
    C = mxGetPr(plhs[0]);
    */
}

void print_real_matrix(double *matrix, mwSize M, mwSize N)
{
    mwIndex n = 0;
    mwIndex m = 0;

    for(m = 0; m < M; m++)
    {
        printf("[ ");
        for(n = 0; n < N; n++)
        {
            printf("%f ", matrix[m + (n * M)]);
            //printf("m=%d n=%d\n", m ,n);
        }
        printf("]\n");
    }
}

void print_complex_matrix(double *real_matrix,
                          double *imaginary_matrix,
                          mwSize M, mwSize N)
{
    mwIndex n = 0;
    mwIndex m = 0;

    for(m = 0; m < M; m++)
    {
        printf("[ ");
        for(n = 0; n < N; n++)
        {
            printf("%f+%fi ",
                    real_matrix[m + (n * M)],
                    imaginary_matrix[m + (n * M)]);
            //printf("m=%d n=%d\n", m ,n);
        }
        printf("]\n");
    }
}
